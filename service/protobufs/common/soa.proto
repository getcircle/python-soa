package soa;

message Control {
    optional string token = 1;
    required string service = 2;
}

message ActionControl {
    required string service = 1;
    required string action = 2;
}

message ActionRequest {
    required ActionControl control = 1;
    optional ActionRequestParams params = 2;
}

message ActionRequestParams {

    // give us room to extend the ActionRequestParams message
    extensions 100 to max;
}

message ActionResponseResult {
    optional bool success = 1;
    repeated string errors = 2;
    repeated ErrorDetail error_details = 3;

    message ErrorDetail {
        optional string error = 1;
        optional string key = 2;
        optional string detail = 3;
    }

    // give us room to extend the ActionResponseResult
    extensions 100 to max;
}

message ActionResponse {
    required ActionControl control = 1;
    optional ActionResponseResult result = 2;
}

message ServiceRequest {
    required Control control = 1;
    repeated ActionRequest actions = 2;
}

message ServiceResponse {
    required Control control = 1;
    repeated ActionResponse actions = 2;
}
